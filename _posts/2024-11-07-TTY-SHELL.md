---
title: NÃ¢ng cáº¥p raw shell (non-interactive shell) lÃªn TTY shell (pseudo shell)
Date: 2024-11-07
category: Guidelines
tags:
  - Guidelines
  - Shell-Beauty
  - Tricks
---
# Revere shell
Sau khi get shell thÃ nh cÃ´ng mÃ¬nh sáº½ sá»­ dá»¥ng python Ä‘á»ƒ khá»Ÿi táº¡o TTY (trong trÆ°á»ng há»£p server victim khÃ´ng cÃ³ python thÃ¬ chá»‹u ğŸ˜…).
```
python3 -c 'import pty;pty.spawn("/bin/bash")'
```
# Out Reverse shell
Sau Ä‘Ã³ `Ctrl+Z` Ä‘á»ƒ suspended lá»‡nh `nc`(gá»i nÃ´m na lÃ  Ä‘Æ°a lá»‡nh `nc` vÃ o cháº¿ Ä‘á»™ cháº¡y ná»n). VÃ  thoÃ¡t khá»i shell Ä‘ang listen. Äá»©ng trÃªn shell local tiáº¿p tá»¥c gÃµ lá»‡nh:
```
stty raw -echo;fg
```
Giáº£i thÃ­ch má»™t chÃºt thÃ¬ `stty` lÃ  má»™t command trÃªn linux dÃ¹ng Ä‘á»ƒ cáº¥u hÃ¬nh thiáº¿t bá»‹ Ä‘áº§u cuá»‘i (terminal). CÃ¡c tuá»³ chá»n `raw`, `-echo` Ä‘á»ƒ Ä‘iá»u chá»‰nh cÃ¡ch terminal xá»­ lÃ½ Ä‘áº§u vÃ o Ä‘áº§u ra:
**`raw`:** Chuyá»ƒn terminal sang cháº¿ Ä‘á»™ raw shell.
**`-echo`:** Táº¯t cháº¿ Ä‘á»™ echo trÃªn terminal.
`fg` sáº½ Ä‘Æ°a tiáº¿n má»™t tiáº¿n trÃ¬nh Ä‘ang cháº¡y ná»n trá»Ÿ láº¡i Ä‘á»ƒ báº¡n cÃ³ thá»ƒ thao tÃ¡c trá»±c tiáº¿p vá»›i nÃ³, tiáº¿n trÃ¬nh Ä‘Ã³ trong trÆ°á»ng há»£p nÃ y lÃ  lá»‡nh `nc`.
# Come back Reverse shell
Sau khi trá»Ÿ láº¡i shell báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh thÃªm cho shell cá»§a báº¡n Ä‘á»ƒ dá»… thao tÃ¡c Ä‘á»‘i vá»›i báº¡n nháº¥t báº±ng cÃ¡ch khai bÃ¡o biáº¿n mÃ´i trÆ°á»ng `TERM` vÃ  thÃªm giÃ¡ trá»‹ cho nÃ³.
Äá»‘i vá»›i mÃ¬nh thÃ¬ mÃ¬nh chá»‰ cáº§n nÃ³ thÃªm tÃ­ mÃ u mÃ¨ ná»¯a lÃ  á»•n. Báº¡n nÃ o muá»‘n giá»‘ng mÃ¬nh thÃ¬ cÃ³ thÃªm run thÃªm command nÃ y sau khi trá»Ÿ láº¡i shell trÃªn victim.
```
export TERM=xterm-256color
```
ChÃºc cÃ¡c báº¡n phÃ¡ server cá»§a ngÆ°á»i khÃ¡c vui váº» khi custom Ä‘Æ°á»£c shell nhÆ° Ã½ cÃ¡c báº¡n mong muá»‘n ğŸ¤ŸğŸ»ğŸ¤ŸğŸ»ğŸ¤ŸğŸ»